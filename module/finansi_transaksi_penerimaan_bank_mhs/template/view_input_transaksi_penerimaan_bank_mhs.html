<!-- patTemplate:tmpl name="content" -->
<script type="text/javascript">
function disableBentukTransaksi(value){
   if(value =='Y'){
      document.getElementById('bentukTransaksi').disabled=false;
   } else{
      document.getElementById('bentukTransaksi').disabled=true;
      document.getElementById('bentukTransaksi').value='';
   }
}

/**
 * popup
 */   
function PopupUnitKerja(url) {
    showPopup(url,'Popup', 600, 550);
}

function PopupRencanaPenerimaan(url) {
    var uk = document.getElementById('unit_kerja_id');
    var kel_ref = document.getElementsByName('ref_kelompok');
    var tbank_id = document.getElementById('tbank_id');
    var kel_ref_pilih ='RPEN';
    for(var rb = 0; rb < kel_ref.length; rb++) {
       if(kel_ref[rb].checked) {
          kel_ref_pilih = kel_ref[rb].value;
       }
    }
    if(!uk.value) {
        alert('Silakan Pilih Unitkerja');
    } else {
        showPopup(url +'&kel_ref='+kel_ref_pilih+ '&unit_kerja_id=' + uk.value+'&tbank_id='+tbank_id.value,'',650, 650);
    }      
}

function PopupSkenarioKodeJurnal(url) {
    showPopup(url,'Popup', 700, 550);
}

function PopupPembayaranMhs(url) {
  //var skenario_id = document.getElementById('skenario_id');
  //var jb_id = document.getElementById('jk_jb_id');
  //var jb_nama = document.getElementById('jk_jb_nama');
  //var mode_catat = document.getElementById('jk_mode_catat');
  //if(!skenario_id.value) {
    //    alert('Silakan Pilih Skenario Jurnal');
  //} else {
    //showPopup(url + '&jk_jb_id=' + jb_id.value + '&jk_jb_nama=' + jb_nama.value + '&mode_catat=' + mode_catat.value,'',700, 550);
    showPopup(url,'Pembayaran Mahasiswa',700, 550);
  //}
}

/**
 * end popup
 */
</script>
<style type="text/css">
table.table-details tfoot tr.buttons input[type="submit"],
table.table-details tfoot tr.buttons input[type="reset"]{
   display: inline-block;
  *display: inline;
  padding: 4px 12px;
  margin-bottom: 0;
  *margin-left: .3em;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
  text-align: center;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
  vertical-align: middle;
  cursor: pointer;
  background-color: #f5f5f5;
  *background-color: #e6e6e6;
  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));
  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
  background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);
  background-repeat: repeat-x;
  border: 1px solid #cccccc;
  *border: 0;
  border-color: #e6e6e6 #e6e6e6 #bfbfbf;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  border-bottom-color: #b3b3b3;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
  *zoom: 1;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
}

table.table-edit input[id="pemb_nominal"].gvFloat{
   color: #005E20;
   font-weight: bold;
   border: none;
   text-align: right !important;
   background-color: inherit;
}
table.table-edit input[id="pemb_potongan"].gvFloat{
   color: #005E20;
   font-weight: bold;
   border: none;
   text-align: right !important;
   background-color: inherit;
}
table.table-edit input[id="pemb_deposit"].gvFloat{
   color: #005E20;
   font-weight: bold;
   border: none;
   text-align: right !important;
   background-color: inherit;
}
table.table-edit input[id="pemb_deposit_masuk"].gvFloat{
   color: #005E20;
   font-weight: bold;
   border: none;
   text-align: right !important;
   background-color: inherit;
}

table.table-jbm input.gvFloat{
   color: #005E20;
   font-weight: bold;
   border: none;
   text-align: right !important;
   background-color: inherit;
}
.tbl-border,
.tbl-border th,
.tbl-border td{
    border-left: 1px solid #CEEEBE;
    border-right: 1px solid #CEEEBE;
}
.tbl-border th {
    text-align: center !important;
}

.ref-bank {
   padding: 5px 0;
}
.ref-bank input {
   margin-bottom: 3px;
}
</style>
<h1>
Transaksi Penerimaan Pembayaran Mahasiswa
</h1>

<br/>
<div class="pageBar">
   <div class="toolbar">
      <a class="xhr dest_subcontent-element" href="{URL_RETURN}" title="Daftar Transaksi" >
         <img src="images/button-detail.gif" alt="^" /> Daftar Transaksi
      </a>
   </div>
</div>
<form method="POST" name="frmInput" action="{URL_ACTION}" class="xhr_form std_form dest_subcontent-element" data-target="{URL_RETURN}" id="frmInput" >
   <input type="hidden" name="data_id" value="{ID}" />
   <input type="hidden" name="tbank_id" id="tbank_id" value="{TBANK_ID}" />
   <input type="hidden" name="pembukuan_referensi_id" value="{PEMBUKUAN_ID}" />
   <input type="hidden" name="data[referensi_id]" id="referensi_id" value="{REFERENSI_ID}" />
   <table class="table-edit" width="100%">
      <tr class="subhead">
         <th colspan="2">
            <!-- patTemplate:gtfwgetconfig config="language" name="tambah" / --> Data
         </th>
      </tr>
       <tr>
         <th style="width: 140px;">
            <!-- patTemplate:gtfwgetconfig config="language" name="unit" / --> /
            <!-- patTemplate:gtfwgetconfig config="language" name="sub_unit" / -->
         </th>
         <td>
            <input type="hidden" name="unit_kerja_id" id="unit_kerja_id" value="{UNIT_KERJA_ID}"/>
            <input type="text" name="unit_kerja_nama" id="unit_kerja_nama" value="{UNIT_KERJA_NAMA}" size="40" readonly="readonly" />
            <input type="hidden" name="is_institute" value="{IS_INSTITUTE}" id="is_institute" />
            <input type="button" name="btn_unit" id="btn_unit" onclick="PopupUnitKerja('{URL_POPUP_UK}')" value=" ... " />
         </td>
      </tr>
       <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="referensi" / -->
         </th>
         <td>
            
             <label style="font-weight: bold;">
               <input type="radio" name="ref_kelompok" value="RPEN" {KEL_RPEN} onclick="cekRef(this.value);"/>
               <!-- patTemplate:gtfwgetconfig config="language" name="rencana_penerimaan" / --> 
            </label>
            <label style="font-weight: bold;">
               <input type="radio" name="ref_kelompok" value="LPPA" {KEL_LPPA} onclick="cekRef(this.value);"/>
               <!-- patTemplate:gtfwgetconfig config="language" name="lppa" / --> 
            </label>
            <div class="ref-bank">
               <input type="hidden" name="rpen_id" id="rpen_id" value="{RPEN_ID}"/>
               <input type="text" name="rpen_nama" id="rpen_nama" value="{RPEN_NAMA}" size="40" readonly="readonly"  />            
               <input type="button" name="but_rpen" id="but_rpen" onclick="PopupRencanaPenerimaan('{URL_POPUP_RENPEN}')" value=" ... " /><br />
               <input type="text" name="rpen_nominal" id="rpen_nominal" value="{RPEN_NOMINAL}" size="40" readonly="readonly"  class="gvFloat"/>
            </div>
         </td>
      </tr>
       <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="kode_bpkb" / -->
         </th>
         <td>
             <label style="font-weight: bold;">
             <input type="radio" name="auto_number" value="Y" {AUTO_YA} onclick="cekBpkb(this.value);"/>
             <!-- patTemplate:gtfwgetconfig config="language" name="auto_number" / --> </label>
             <input type="radio" name="auto_number" value="T" {AUTO_TIDAK}  onclick="cekBpkb(this.value);"/>
             <input type="hidden" name="bpkb_ro" id="bpkb_ro"  value="{BPKB_RO_V}"/> 
             <input type="text" name="bpkb" id="bpkb" size="20" value="{BPKB}" {BPKB_RO_V}/> &nbsp;*
         </td>
      </tr>
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="tanggal_transaksi" / -->
         </th>
         <td>
            <!-- patTemplate:gtfwrendermodule module="tanggal" submodule="Tanggal" action="view" name="referensi_tanggal" / -->
         </td>
      </tr>
      
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="diterima_dari" / -->
         </th>
          <td>
            <input type="text" name="nama_penyetor" id="txt_nama_penyetor" value="{NAMA_PENYETOR}" size="50" />&nbsp;*
         </td>
      </tr>
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="kepada" / -->
         </th>
         <td>
            <input type="text" name="nama_penerima" id="txt_nama_penerima" value="{NAMA_PENERIMA}" size="50" />&nbsp;*
         
         </td>
      </tr>      
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="keterangan" / -->
         </th>
         <td>
            <textarea name="keterangan" id="referensi_keterangan" rows="4" cols='50' style="width: 70%; resize: none;">{KETERANGAN}</textarea>&nbsp;*
         </td>
      </tr>
<!-- patTemplate:tmpl name="field_visibility" visibility="hidden" -->      
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="skenario_jurnal" / -->
         </th>
         <td>
            <input type="hidden" name="skenario_id" id="skenario_id" value="{SKENARIO_ID}" />
            <input type="hidden" name="jk_jb_id" id="jk_jb_id" value="{JK_JB_ID}" />
            <input type="hidden" name="jk_jb_nama" id="jk_jb_nama" value="{JK_JB_NAMA}" />
            <input type="hidden" name="jk_mode_catat" id="jk_mode_catat" value="{JK_MODE_CATAT}" />
            <input type="text" name="skenario_nama" id="skenario_nama" value="{SKENARIO_NAMA}" size="25" readonly="readonly" />
            <input type="button" name="but_skj" id="but_skj" onclick=" PopupSkenarioKodeJurnal('{URL_POPUP_SKJ}')" value=" ... " />
          
         </td>
      </tr>

       <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="tipe_transaksi" / -->
         </th>
            <td>
                <!-- patTemplate:gtfwrendermodule module="combobox" submodule="combobox" action="view" name="tipe_transaksi"  / -->&nbsp;*
            </td>
      </tr>     
<!-- /patTemplate:tmpl -->
      <tr>
         <th>
            <!-- patTemplate:gtfwgetconfig config="language" name="pembayaran" / -->
         </th>
         <td>  
            <button style="vertical-align: middle; padding: 4px 6px;{IS_DISPLAY_NO_REF}" id="but_pemb" name="but_pemb" type="button"  onclick="PopupPembayaranMhs('{URL_POPUP_PEMB_MHS}');" >
                  <img src="images/button-search.gif" alt="cari" style="margin-bottom: -4px;" />
                  Pembayaran
            </button>
            <input type="hidden" name="pemb_jenis_biaya" id="pemb_jenis_biaya" value="{PEMB_JENIS_BIAYA}"/>
            <input type="hidden" name="pemb_id_detil" id="pemb_id_detil" value="{PEMB_ID_DETIL}"/>
            
            
             <br />
             <br />
             <table id="tbl_pemb" class="table-edit table-jbm tbl-border" {SHOW_PP}>
                  <tbody id="CoaPlaceHolder_pemb">
                     <tr id="pemb-empty-row">
                        <td></td>
                     </tr>
                  </tbody>
               </table>
             <br />
             <table id="tbl_jb" class="table-edit  table-jbm tbl-border"  {SHOW_JB}>
                     <tr class="subhead">
                        <th>
                           Jenis Biaya
                        </th>
                        <th align="center">
                           Nominal
                        </th>
                        <th align="center" id="kolom-potongan" style="display:none;">
                           Potongan
                        </th>
                        <th align="center" id="kolom-deposit" style="display:none;">
                           Deposit
                        </th>
                     </tr>    
                  <tbody id="CoaPlaceHolder_jb">
                     <tr id="jb-empty-row">
                        <td colspan="6" style="text-align: center;">
                           Pilih JB
                        </td>
                     </tr>
                  </tbody>
               </table>                            
         </td>
      </tr>                  
   </table>
   <br>
   <!-- patTemplate:tmpl name="warning_box" visibility="hidden" -->
      <div class="{CLASS_PESAN}" >
         {ISI_PESAN}
      </div>
      <br/>
   <!-- /patTemplate:tmpl -->
   <table class="table-details" >
      <thead>
         <tr>
            <td width="30">
               <strong>
                  <!-- patTemplate:gtfwgetconfig config="language" name="debet" / -->
               </strong>
            </td>
            <td width="5">:</td>
            <td class="links" align="center" style="text-align: right;">
               <a class="dest_subcontent-element" href="javascript:void(0)" onclick="javascript:showPopup('{POPUP_COA}&tipe=debet','',600, 500);" title="Tambah Debet">
                  <img src="images/icons/16/button-add.gif" style="margin-bottom: -4px;" />
                  <b><!-- patTemplate:gtfwgetconfig config="language" name="tambah_akun" / --></b>
               </a>
            </td>
         </tr>
      </thead>
      <tbody>
         <tr>
            <td colspan="3" style="padding: 0px; margin: 0px;">
               <table class="table-common" style="width: 100%;">
                  <thead>
                     <tr>
                        <th style="width: 115px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="kode_rekening" / -->
                        </th>
                        <th style="width: 145px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="sub_account" / -->
                        </th>
                        <th style="width: 215px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="nama_rekening" / -->
                        </th>
                        <th style="width: 115px;display: none;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="no_referensi" / -->
                        </th>
                        <th>
                           <!-- patTemplate:gtfwgetconfig config="language" name="deskripsi" / -->
                        </th>
                        <th style="width: 115px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="nilai_rp" / -->
                        </th>
                        <th style="width: 20px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="aksi" / -->
                        </th>
                     </tr>
                  </thead>
                  <tbody id="CoaPlaceHolder_debet">
                     <tr id="debet-empty-row">
                        <td colspan="6" style="text-align: center;">
                           Pilih data Akun
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
         </tr>
      </tbody>
      <tbody><tr><td colspan="3">&nbsp;<!-- sepataror --></td></tr></tbody>
      <thead>
         <tr>
            <td width="30">
               <strong>
                  <!-- patTemplate:gtfwgetconfig config="language" name="kredit" / -->
               </strong>
            </td>
            <td width="5">:</td>
            <td class="links" align="center" style="text-align: right;">
               <a class="dest_subcontent-element" href="javascript:void(0)" onclick="javascript:showPopup('{POPUP_COA}&tipe=kredit', '', 600, 500);" title="Tambah Kredit">
                  <img src="images/icons/16/button-add.gif" style="margin-bottom: -4px;" />
                  <b><!-- patTemplate:gtfwgetconfig config="language" name="tambah_akun" / --></b>
               </a>
            </td>
         </tr>
      </thead>
      <tbody>
         <tr>
            <td colspan="3" style="padding: 0px; margin: 0px;">
               <table class="table-common" style="width: 100%;">
                  <thead>
                     <tr>
                        <th style="width: 115px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="kode_rekening" / -->
                        </th>
                        <th style="width: 145px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="sub_account" / -->
                        </th>
                        <th style="width: 215px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="nama_rekening" / -->
                        </th>
                        <th style="width: 115px;display: none;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="no_referensi" / -->
                        </th>
                        <th>
                           <!-- patTemplate:gtfwgetconfig config="language" name="deskripsi" / -->
                        </th>
                        <th style="width: 115px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="nilai_rp" / -->
                        </th>
                        <th style="width: 20px;">
                           <!-- patTemplate:gtfwgetconfig config="language" name="aksi" / -->
                        </th>
                     </tr>
                  </thead>
                  <tbody id="CoaPlaceHolder_kredit">
                     <tr id="kredit-empty-row">
                        <td colspan="6" style="text-align: center;">
                           Pilih data Akun
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
         </tr>
      </tbody>
      <tfoot>
         <tr class="buttons">
            <td colspan="3" style="text-align: right;">
               <input name="btnReset" value=" <!-- patTemplate:gtfwgetconfig config="language" name="batal" / --> " class="buttonSubmit" type="RESET">
               <input name="btnsimpan" value=" <!-- patTemplate:gtfwgetconfig config="language" name="simpan" / --> " class="buttonSubmit" type="submit">
            </td>
         </tr>
      </tfoot>
   </table>
</form>
<script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[

function setComboSubAccount(id, selectedVal, tipe = 'debet'){
   var subAccount = {JSON_SUBACCOUNT};
   var isInstitute = document.getElementById('is_institute').value;
   var subAkunVal;
   if(selectedVal == "" || selectedVal == null){
      if(isInstitute == 'T'){
         subAkunVal = '01-00-00-00-00-00-00';
      }else{
         subAkunVal = '00-00-00-00-00-00-00';
      }
   }else{
      subAkunVal = selectedVal;
   }

   var select = `<select id="${tipe}-sub-account-${id}" name="${tipe}[${id}][subaccount]"  style="width:200px">`;
   
   for (i in subAccount){
      let selected = (subAkunVal == subAccount[i]['kode']) ? 'selected' : '';
      select += `<option value="${subAccount[i]['kode']}" ${selected}>${subAccount[i]['nama']}</option>`
   }

   select += `</select>`;

   return select;
}

document.getElementById('CoaPlaceHolder_debet').addItem     = function(id, kode, nama, subAkun, referensi, keterangan, nominal){
   var elemen_id  = 'jurnal_debet_'+id;
   if(document.getElementById(elemen_id)){
      return true;
   }
   var frag             = document.createDocumentFragment();
   var childObj         = this.getElementsByTagName('tr');

   for (var i = childObj.length - 1; i >= 0; i--) {
      if(childObj[i].id === 'debet-empty-row' || childObj[i].id == 'row-debet-total'){
         this.removeChild(childObj[i]);
      }
   };

   var tr      = document.createElement('tr');
   tr.id       = elemen_id;

   var inputId       = document.createElement('input');
   inputId.type      = 'hidden';
   inputId.id        = 'debet-id-'+id;
   inputId.name      = 'debet['+id+'][id]';
   inputId.value     = id;

   var tdKode        = document.createElement('td');
   tdKode.style.textAlign  = 'center';
   var inputKode     = document.createElement('input');
   inputKode.type    = 'hidden';
   inputKode.name    = 'debet['+id+'][kode]';
   inputKode.id      = 'debet-kode-'+id;
   inputKode.value   = kode;

   var labelKode     = document.createElement('label');
   labelKode.innerHTML  = kode;
   labelKode.style.display    = 'block';
   labelKode.style.width      = '100%';
   tdKode.appendChild(labelKode);

   var tdNama        = document.createElement('td');
   var inputNama     = document.createElement('input');
   inputNama.type    = 'hidden';
   inputNama.id      = 'debet-nama-'+id;
   inputNama.name    = 'debet['+id+'][nama]';
   inputNama.value   = nama;
   var labelNama     = document.createElement('label');
   labelNama.innerHTML  = nama;
   tdNama.appendChild(labelNama);

   var tdSubAkun     = document.createElement('td');
   var inputSubAkun  = setComboSubAccount(id,subAkun,'debet');
   tdSubAkun.innerHTML = inputSubAkun;

   var tdReferensi   = document.createElement('td');
   var inputReferensi      = document.createElement('input');
   inputReferensi.type     = 'text';
   inputReferensi.name     = 'debet['+id+'][nomor_referensi]';
   inputReferensi.id       = 'debet-referensi-'+id;
   inputReferensi.value    = referensi;
   tdReferensi.style.display = 'none';
   tdReferensi.appendChild(inputReferensi);

   var tdKeterangan  = document.createElement('td');
   var inputKeterangan     = document.createElement('textarea');
   inputKeterangan.name    = 'debet['+id+'][keterangan]';
   inputKeterangan.style.resize  = 'none';
   inputKeterangan.style.width   = '100%';
   inputKeterangan.id            = 'debet-keterangan-'+id;
   inputKeterangan.value         = keterangan;
   tdKeterangan.appendChild(inputKeterangan);

   var tdNominal     = document.createElement('td');
   var inputNominal           = document.createElement('input');
   inputNominal.type          = 'text';
   inputNominal.name          = 'debet['+id+'][nominal]';
   inputNominal.className     = 'gvFloat';
   inputNominal.id            = 'debet-nominal-'+id;
   inputNominal.value         = nominal;
   inputNominal.setAttribute('onkeyup', 'setNominalJurnal("'+this.id+'");');
   tdNominal.appendChild(inputNominal);

   var tdAksi        = document.createElement('td');
   tdAksi.className  = 'links';
   tdAksi.style.padding       = 0;
   tdAksi.style.paddingTop    = '4px';
   tdAksi.style.textAlign     = 'center';
   var linkAksiDelete         = document.createElement('a');
   linkAksiDelete.style.float = 'none';
   linkAksiDelete.style.display = 'inline-block';
   linkAksiDelete.href        = 'javascript:void(0);';
   linkAksiDelete.title       = 'Delete '+id;
   linkAksiDelete.setAttribute('onclick', 'deleteRecord("'+this.id+'", this);');
   var iconDelete             = document.createElement('img');
   iconDelete.src             = 'images/icons/16/button-delete.gif';
   iconDelete.alt             = 'delete';
   linkAksiDelete.appendChild(iconDelete);
   tdAksi.appendChild(linkAksiDelete);

   tr.appendChild(inputId);
   tr.appendChild(inputKode);
   tr.appendChild(inputNama);
   tr.appendChild(tdKode);
   tr.appendChild(tdSubAkun);
   tr.appendChild(tdNama);
   tr.appendChild(tdReferensi);
   tr.appendChild(tdKeterangan);
   tr.appendChild(tdNominal);
   tr.appendChild(tdAksi);

   frag.appendChild(tr);

   // elemen row total
   var trTotal       = document.createElement('tr');
   trTotal.id        = 'row-debet-total';
   trTotal.style.fontWeight      = 'bold';

   var tdTotalLabel              = document.createElement('td');
   tdTotalLabel.innerHTML        = 'Total';
   tdTotalLabel.style.textAlign  = 'center';
   tdTotalLabel.setAttribute('colspan', '4');

   var tdTotalNominal            = document.createElement('td');
   var labelNominalTotal         = document.createElement('label');
   labelNominalTotal.id          = 'debet-total';
   labelNominalTotal.style.display     = 'block';
   labelNominalTotal.style.fontWeight  = 'bold';
   labelNominalTotal.style.textAlign   = 'right';
   labelNominalTotal.style.width       = '100%';
   labelNominalTotal.innerHTML         = 0;
   tdTotalNominal.appendChild(labelNominalTotal);

   var tdEmptyTotal              = document.createElement('td');
   trTotal.appendChild(tdTotalLabel);
   trTotal.appendChild(tdTotalNominal);
   trTotal.appendChild(tdEmptyTotal);
   frag.appendChild(trTotal);
   this.appendChild(frag);


   var childObjNominal = tdNominal.firstChild;
   do {
      if (childObjNominal.tagName && childObjNominal.tagName.toUpperCase() == 'INPUT' && childObjNominal.getAttribute('class') != null && childObjNominal.getAttribute('class').toUpperCase() == 'GVFLOAT'){
         gValidation20090108['.gvFloat'](childObjNominal);
      }
   } while (childObjNominal   = childObjNominal.nextSibling);

   var subAkunNode      = tdSubAkun.firstChild;
   do {
      if (subAkunNode.tagName && subAkunNode.tagName.toUpperCase() == 'INPUT' && subAkunNode.getAttribute('class') != null && subAkunNode.getAttribute('class').toUpperCase() == 'INPUT_MASK'){
         // $(subAkunNode).inputmask('{SUB_AKUN_PATERN}');
         custom_js['.input_mask'](subAkunNode);
      }
   } while (subAkunNode   = subAkunNode.nextSibling);

   setNominalJurnal(this.id);

   return true;
}

document.getElementById('CoaPlaceHolder_kredit').addItem     = function(id, kode, nama, subAkun, referensi, keterangan, nominal){
   var elemen_id  = 'jurnal_kredit_'+id;
   if(document.getElementById(elemen_id)){
      return true;
   }
   var frag             = document.createDocumentFragment();
   var childObj         = this.getElementsByTagName('tr');

   for (var i = childObj.length - 1; i >= 0; i--) {
      if(childObj[i].id === 'kredit-empty-row' || childObj[i].id == 'row-kredit-total'){
         this.removeChild(childObj[i]);
      }
   };

   var tr      = document.createElement('tr');
   tr.id       = elemen_id;

   var inputId       = document.createElement('input');
   inputId.type      = 'hidden';
   inputId.id        = 'kredit-id-'+id;
   inputId.name      = 'kredit['+id+'][id]';
   inputId.value     = id;

   var tdKode        = document.createElement('td');
   tdKode.style.textAlign  = 'center';
   var inputKode     = document.createElement('input');
   inputKode.type    = 'hidden';
   inputKode.name    = 'kredit['+id+'][kode]';
   inputKode.id      = 'kredit-kode-'+id;
   inputKode.value   = kode;

   var labelKode     = document.createElement('label');
   labelKode.innerHTML  = kode;
   labelKode.style.display    = 'block';
   labelKode.style.width      = '100%';
   tdKode.appendChild(labelKode);

   var tdNama        = document.createElement('td');
   var inputNama     = document.createElement('input');
   inputNama.type    = 'hidden';
   inputNama.id      = 'kredit-nama-'+id;
   inputNama.name    = 'kredit['+id+'][nama]';
   inputNama.value   = nama;
   var labelNama     = document.createElement('label');
   labelNama.innerHTML  = nama;
   tdNama.appendChild(labelNama);

   var tdSubAkun     = document.createElement('td');
   var inputSubAkun  = setComboSubAccount(id,subAkun,'kredit');
   tdSubAkun.innerHTML = inputSubAkun;

   var tdReferensi   = document.createElement('td');
   var inputReferensi      = document.createElement('input');
   inputReferensi.type     = 'text';
   inputReferensi.name     = 'kredit['+id+'][nomor_referensi]';
   inputReferensi.id       = 'kredit-referensi-'+id;
   inputReferensi.value    = referensi;
   tdReferensi.style.display = 'none';
   tdReferensi.appendChild(inputReferensi);

   var tdKeterangan  = document.createElement('td');
   var inputKeterangan     = document.createElement('textarea');
   inputKeterangan.name    = 'kredit['+id+'][keterangan]';
   inputKeterangan.style.resize  = 'none';
   inputKeterangan.style.width   = '100%';
   inputKeterangan.id            = 'kredit-keterangan-'+id;
   inputKeterangan.value         = keterangan;
   tdKeterangan.appendChild(inputKeterangan);

   var tdNominal     = document.createElement('td');
   var inputNominal           = document.createElement('input');
   inputNominal.type          = 'text';
   inputNominal.name          = 'kredit['+id+'][nominal]';
   inputNominal.className     = 'gvFloat';
   inputNominal.id            = 'kredit-nominal-'+id;
   inputNominal.value         = nominal;
   inputNominal.setAttribute('onkeyup', 'setNominalJurnal("'+this.id+'");');
   tdNominal.appendChild(inputNominal);

   var tdAksi        = document.createElement('td');
   tdAksi.className  = 'links';
   tdAksi.style.padding       = 0;
   tdAksi.style.paddingTop    = '4px';
   tdAksi.style.textAlign     = 'center';
   var linkAksiDelete         = document.createElement('a');
   linkAksiDelete.style.float = 'none';
   linkAksiDelete.style.display = 'inline-block';
   linkAksiDelete.href        = 'javascript:void(0);';
   linkAksiDelete.title       = 'Delete '+id;
   linkAksiDelete.setAttribute('onclick', 'deleteRecord("'+this.id+'", this);');
   var iconDelete             = document.createElement('img');
   iconDelete.src             = 'images/icons/16/button-delete.gif';
   iconDelete.alt             = 'delete';
   linkAksiDelete.appendChild(iconDelete);
   tdAksi.appendChild(linkAksiDelete);

   tr.appendChild(inputId);
   tr.appendChild(inputKode);
   tr.appendChild(inputNama);
   tr.appendChild(tdKode);
   tr.appendChild(tdSubAkun);
   tr.appendChild(tdNama);
   tr.appendChild(tdReferensi);
   tr.appendChild(tdKeterangan);
   tr.appendChild(tdNominal);
   tr.appendChild(tdAksi);

   frag.appendChild(tr);

   // elemen row total
   var trTotal       = document.createElement('tr');
   trTotal.id        = 'row-kredit-total';
   trTotal.style.fontWeight      = 'bold';

   var tdTotalLabel              = document.createElement('td');
   tdTotalLabel.innerHTML        = 'Total';
   tdTotalLabel.style.textAlign  = 'center';
   tdTotalLabel.setAttribute('colspan', '4');

   var tdTotalNominal            = document.createElement('td');
   var labelNominalTotal         = document.createElement('label');
   labelNominalTotal.id          = 'kredit-total';
   labelNominalTotal.style.display     = 'block';
   labelNominalTotal.style.fontWeight  = 'bold';
   labelNominalTotal.style.textAlign   = 'right';
   labelNominalTotal.style.width       = '100%';
   labelNominalTotal.innerHTML         = 0;
   tdTotalNominal.appendChild(labelNominalTotal);

   var tdEmptyTotal              = document.createElement('td');
   trTotal.appendChild(tdTotalLabel);
   trTotal.appendChild(tdTotalNominal);
   trTotal.appendChild(tdEmptyTotal);
   frag.appendChild(trTotal);
   this.appendChild(frag);


   var childObjNominal = tdNominal.firstChild;
   do {
      if (childObjNominal.tagName && childObjNominal.tagName.toUpperCase() == 'INPUT' && childObjNominal.getAttribute('class') != null && childObjNominal.getAttribute('class').toUpperCase() == 'GVFLOAT'){
         gValidation20090108['.gvFloat'](childObjNominal);
      }
   } while (childObjNominal   = childObjNominal.nextSibling);

   var subAkunNode      = tdSubAkun.firstChild;
   do {
      if (subAkunNode.tagName && subAkunNode.tagName.toUpperCase() == 'INPUT' && subAkunNode.getAttribute('class') != null && subAkunNode.getAttribute('class').toUpperCase() == 'INPUT_MASK'){
         // $(subAkunNode).inputmask('{SUB_AKUN_PATERN}');
         custom_js['.input_mask'](subAkunNode);
      }
   } while (subAkunNode   = subAkunNode.nextSibling);

   setNominalJurnal(this.id);

   return true;
}

document.getElementById('CoaPlaceHolder_jb').addItem     = function(prodi_id, nama, id, jb_nama,nominal,potongan,deposit,keterangan,id_detail,tipe){
   var elemen_id  = 'jb_'+id;
   if(document.getElementById(elemen_id)){
      return true;
   }
   var frag             = document.createDocumentFragment();
   var childObj         = this.getElementsByTagName('tr');

   for (var i = childObj.length - 1; i >= 0; i--) {
      if(childObj[i].id === 'jb-empty-row'){
         this.removeChild(childObj[i]);
      }
   };

   var tr      = document.createElement('tr');
   tr.id       = elemen_id;

   var tdProdi        = document.createElement('td');
   var inputProdi     = document.createElement('input');
   inputProdi.type    = 'hidden';
   inputProdi.name    = 'jb['+id+'][prodi_id]';
   inputProdi.id      = 'jb-prodi-'+id;
   inputProdi.value   = prodi_id;
   tdProdi.appendChild(inputProdi);

   //var tdProdiNama        = document.createElement('td');
   var inputProdiNama     = document.createElement('input');
   inputProdiNama.type    = 'hidden';
   inputProdiNama.name    = 'jb['+id+'][prodi_nama]';
   inputProdiNama.id      = 'jb-prodi-nama-'+id;
   inputProdiNama.value   = nama;
   tdProdi.appendChild(inputProdiNama);

   //var tdJenisBiayaId        = document.createElement('td');
   var inputJenisBiayaId     = document.createElement('input');
   inputJenisBiayaId.type    = 'hidden';
   inputJenisBiayaId.name    = 'jb['+id+'][jenis_biaya_id]';
   inputJenisBiayaId.id      = 'jb-jenis-biaya-id-'+id;
   inputJenisBiayaId.value   = id;
   tdProdi.appendChild(inputJenisBiayaId);
   
   //var tdJenisBiayaNama        = document.createElement('td');
   var inputJenisBiayaNama     = document.createElement('input');
   var labelJenisBiayaNama     = document.createElement('label');
   inputJenisBiayaNama.type    = 'hidden';
   inputJenisBiayaNama.name    = 'jb['+id+'][jenis_biaya_nama]';
   inputJenisBiayaNama.id      = 'jb-jenis-biaya-nama-'+id;
   inputJenisBiayaNama.value   = jb_nama;
   labelJenisBiayaNama.innerHTML = jb_nama;
   tdProdi.appendChild(inputJenisBiayaNama);
   tdProdi.appendChild(labelJenisBiayaNama);
   
   var tdNominal        = document.createElement('td');
   var inputNominal     = document.createElement('input');
   inputNominal.type    = 'text';
   inputNominal.name    = 'jb['+id+'][nominal]';
   inputNominal.id      = 'jb-nominal-'+id;
   inputNominal.value   = nominal;
   inputNominal.className ='jb_number gvFloat';
   tdNominal.appendChild(inputNominal);
   
   var tdPot        = document.createElement('td');
   var inputPot     = document.createElement('input');
   inputPot.type    = 'text';
   inputPot.name    = 'jb['+id+'][potongan]';
   inputPot.id      = 'jb-potongan-'+id;
   inputPot.value   = potongan;
   inputPot.className ='gvFloat';
   tdPot.appendChild(inputPot);
   
   var tdDep        = document.createElement('td');
   var inputDep     = document.createElement('input');
   inputDep.type    = 'text';
   inputDep.name    = 'jb['+id+'][deposit]';
   inputDep.id      = 'jb-deposit-'+id;
   inputDep.value   = deposit;
   inputDep.className ='gvFloat';
   tdDep.appendChild(inputDep);
   
   //var tdKet        = document.createElement('td');
   var inputKet     = document.createElement('input');
   inputKet.type    = 'hidden';
   inputKet.name    = 'jb['+id+'][keterangan]';
   inputKet.id      = 'jb-keterangan-'+id;
   inputKet.value   = keterangan;
   tdProdi.appendChild(inputKet);
   
   //var tdIdDetail        = document.createElement('td');
   var inputIdDetail     = document.createElement('input');
   inputIdDetail.type    = 'hidden';
   inputIdDetail.name    = 'jb['+id+'][id_detail]';
   inputIdDetail.id      = 'jb-id_detail-'+id;
   inputIdDetail.value   = id_detail;
   tdProdi.appendChild(inputIdDetail);
   
   //tipe
   var inputTipe     = document.createElement('input');
   inputTipe.type    = 'hidden';
   inputTipe.name    = 'jb['+id+'][tipe]';
   inputTipe.id      = 'jb-tipe-'+id;
   inputTipe.value   = tipe;
   tdProdi.appendChild(inputTipe);
   
   tr.appendChild(tdProdi);
   //tr.appendChild(tdProdiNama);
   //tr.appendChild(tdJenisBiayaId);
   //tr.appendChild(tdJenisBiayaNama);
   tr.appendChild(tdNominal);  
   if(tipe === 'pengakuan') {
        tr.appendChild(tdPot);
        tr.appendChild(tdDep);
   }
   //tr.appendChild(tdKet);
   //tr.appendChild(tdIdDetail);

   frag.appendChild(tr);   
   this.appendChild(frag);
   gValidation20090108['.gvFloat'](inputNominal);
   gValidation20090108['.gvFloat'](inputPot);
   gValidation20090108['.gvFloat'](inputDep);
   return true;
}


document.getElementById('CoaPlaceHolder_pemb').addItem     = function(tipe_pembayaran,prodi_id, prodi_nama,nominal,potongan,deposit,deposit_masuk,keterangan,pj_nama,id_detail){
   var elemen_id  = 'pemb_';
   
   var frag             = document.createDocumentFragment();
   var childObj         = this.getElementsByTagName('tr');

   for (var i = childObj.length - 1; i >= 0; i--) {
      if(childObj[i].id === 'pemb-empty-row'){
         this.removeChild(childObj[i]);
      }
   };

   var tr1       = document.createElement('tr');
   var tr2       = document.createElement('tr');
   var tr3       = document.createElement('tr');
   var tr4       = document.createElement('tr');
   var tr5       = document.createElement('tr');
   var tr6       = document.createElement('tr');
   
   tr1.id        = elemen_id + 1;
   tr2.id        = elemen_id + 2;
   tr3.id        = elemen_id + 3;
   tr4.id        = elemen_id + 4;
   tr5.id        = elemen_id + 5;
   tr6.id        = elemen_id + 6;

   // untuk prodi
   var tdLabelProdi        = document.createElement('td');
   tdLabelProdi.innerHTML = 'Program Studi';

   var tdProdiNama        = document.createElement('td');   
   var inputProdi     = document.createElement('input');
   inputProdi.type    = 'hidden';
   inputProdi.name    = 'pemb_prodi_id';
   inputProdi.id      = 'pemb_prodi_id';
   inputProdi.value   =  prodi_id;   
   var inputProdiNama     = document.createElement('input');
   var LabelProdiNama     = document.createElement('label');
   inputProdiNama.type    = 'hidden';
   inputProdiNama.name    = 'pemb_prodi_nama';
   inputProdiNama.id      = 'pemb_prodi_nama';
   inputProdiNama.value   = prodi_nama;
   LabelProdiNama.innerHTML = prodi_nama;
   tdProdiNama.appendChild(inputProdi);
   tdProdiNama.appendChild(inputProdiNama);
   tdProdiNama.appendChild(LabelProdiNama);
   // end
   
   //untuk tipe pembayaran
   var tdLabelTipePembayaran       = document.createElement('td');
   tdLabelTipePembayaran.innerHTML = 'Tipe Pembayaran';
   
   var tdTipePembayaran       = document.createElement('td');
   var inputTipePembayaran     = document.createElement('input');
   var LabelTipePembayaran     = document.createElement('label');
   inputTipePembayaran.type    = 'hidden';
   inputTipePembayaran.name    = 'pemb_tipe_pembayaran';
   inputTipePembayaran.id      = 'pemb_tipe_pembayaran';
   inputTipePembayaran.value   = tipe_pembayaran;
   var strTipeBayarLabel = '-';
   switch(tipe_pembayaran){
       case 'pengakuan' : strTipeBayarLabel = 'Pengakuan'; break;
       case 'pengakuan_depmasuk' : strTipeBayarLabel =  'Pengakuan Deposit Masuk'; break;
       case 'piutang' : strTipeBayarLabel = 'Piutang'; break;           
   }
   LabelTipePembayaran.innerHTML =  strTipeBayarLabel;
   tdTipePembayaran.appendChild(inputTipePembayaran);   
   tdTipePembayaran.appendChild(LabelTipePembayaran);   
   
   // untuk nominal pembayaran
   var tdLabelNominal        = document.createElement('td');
   tdLabelNominal.innerHTML = 'Total Nominal Rp.';
   
   var tdNominal        = document.createElement('td');
   var inputNominal     = document.createElement('input');
   inputNominal.type    = 'text';
   inputNominal.name    = 'pemb_nominal';
   inputNominal.id      = 'pemb_nominal';
   inputNominal.value   = nominal;
   inputNominal.className = 'gvFloat';
   tdNominal.appendChild(inputNominal);
   // end nominal pembayaran
   
   //untuk nominal potongan
   var tdLabelPot        = document.createElement('td');
   tdLabelPot.innerHTML = 'Total Potongan Rp.';
   
   var tdPot        = document.createElement('td');
   var inputPot     = document.createElement('input');
   inputPot.type    = 'text';
   inputPot.name    = 'pemb_potongan';
   inputPot.id      = 'pemb_potongan';
   inputPot.value   = potongan;
   inputPot.className = 'gvFloat';
   tdPot.appendChild(inputPot);
   //end nominal potongan
   
   //untuk nominal deposit
   var tdLabelDep        = document.createElement('td');
   tdLabelDep.innerHTML = 'Total Deposit Rp.';
   
   var tdDep        = document.createElement('td');
   var inputDep     = document.createElement('input');
   inputDep.type    = 'text';
   inputDep.name    = 'pemb_deposit';
   inputDep.id      = 'pemb_deposit';
   inputDep.value   = deposit;
   inputDep.className = 'gvFloat';
   tdDep.appendChild(inputDep);
   // end nominal
   
   //untuk deposit masuk
   var tdLabelDepMasuk      = document.createElement('td');
   tdLabelDepMasuk.innerHTML ='Total Deposit Masuk Rp.';
   
   var tdDepMasuk      = document.createElement('td');
   var inputDepMasuk   = document.createElement('input');
   inputDepMasuk.type    = 'text';
   inputDepMasuk.name    = 'pemb_deposit_masuk';
   inputDepMasuk.id      = 'pemb_deposit_masuk';
   inputDepMasuk.value   = deposit_masuk;
   inputDepMasuk.className = 'gvFloat';
   tdDepMasuk.appendChild(inputDepMasuk);
   
   var inputKet    = document.createElement('input');   
   inputKet.type    = 'hidden';
   inputKet.name    = 'pemb_keterangan';
   inputKet.id      = 'pemb_keterangan';
   inputKet.value   = keterangan;
   var inputPj    = document.createElement('input');
   inputPj.type    = 'hidden';
   inputPj.name    = 'pemb_penanggung_jawab';
   inputPj.id      = 'pemb_penanggung_jawab';
   inputPj.value   = pj_nama;

   var inputIdDetail    = document.createElement('input');   
   inputIdDetail.type    = 'hidden';
   inputIdDetail.name    = 'pemb_id_detail';
   inputIdDetail.id      = 'pemb_id_detail';
   inputIdDetail.value   = id_detail;
   tdProdiNama.appendChild(inputIdDetail);
   
   tdDepMasuk.appendChild(inputKet);
   tdDepMasuk.appendChild(inputPj);
   
   tr1.appendChild(tdLabelProdi);
   tr1.appendChild(tdProdiNama);
   tr1.appendChild(tdProdiNama);
   
   tr2.appendChild(tdLabelTipePembayaran);
   tr2.appendChild(tdTipePembayaran);
   
   tr3.appendChild(tdLabelNominal);
   tr3.appendChild(tdNominal);
   
   tr4.appendChild(tdLabelPot);
   tr4.appendChild(tdPot);
   tr5.appendChild(tdLabelDep);
   tr5.appendChild(tdDep);
   tr6.appendChild(tdLabelDepMasuk);
   tr6.appendChild(tdDepMasuk);
  
   tr3.style.display = 'none';
   tr4.style.display = 'none';
   tr5.style.display = 'none';
        
   frag.appendChild(tr1);   
   frag.appendChild(tr2);   
   frag.appendChild(tr3);  
   if(tipe_pembayaran === 'pengakuan') {                       
        tr6.style.display = 'none';
        frag.appendChild(tr4);
        frag.appendChild(tr5);
        frag.appendChild(tr6);
        if(document.getElementById('kolom-deposit')){
            document.getElementById('kolom-deposit').removeAttribute('style');
        }
        
        if(document.getElementById('kolom-potongan')){
            document.getElementById('kolom-potongan').removeAttribute('style');
        }
   } else if(tipe_pembayaran ==='piutang' ) {          
        tr6.style.display = 'none';
       if(document.getElementById('kolom-deposit')){
            document.getElementById('kolom-deposit').style.display="none";
        }
        
        if(document.getElementById('kolom-potongan')){
            document.getElementById('kolom-potongan').style.display="none";
        }
   } else {
        tr3.removeAttribute('style');
        frag.appendChild(tr4);
        frag.appendChild(tr5);
        frag.appendChild(tr6);
   }


   this.appendChild(frag);      
   gValidation20090108['.gvFloat'](inputNominal);
   gValidation20090108['.gvFloat'](inputPot);
   gValidation20090108['.gvFloat'](inputDep);
   gValidation20090108['.gvFloat'](inputDepMasuk);
   return true;
}

// tambahan
document.getElementById('CoaPlaceHolder_debet').deleteAllItem = function ()
{
     setEmptyRecord(this);
}

document.getElementById('CoaPlaceHolder_kredit').deleteAllItem = function ()
{
     setEmptyRecord(this);
}

// tambahan

document.getElementById('CoaPlaceHolder_jb').deleteAllItem = function ()
{
    var elemen = this;    
    var emptyRow   = 'jb-empty-row';

    var childObj   = elemen.getElementsByTagName('tr');
    for (var i = childObj.length - 1; i >= 0; i--) {
       elemen.removeChild(childObj[i]);
    };

    var frag       = document.createDocumentFragment();
    var tr         = document.createElement('tr');
    tr.id          = emptyRow;
    var td         = document.createElement('td');
    td.setAttribute('colspan', 6);
    td.style.textAlign   = 'center';
    td.innerHTML   = 'Pilih Data Jb';

    tr.appendChild(td);
    frag.appendChild(tr);
    elemen.insertBefore(frag, elemen.firstChild);

    return true;
}

document.getElementById('CoaPlaceHolder_pemb').deleteAllItem = function ()
{
    var elemen = this;    
    var emptyRow   = 'pemb-empty-row';

    var childObj   = elemen.getElementsByTagName('tr');
    for (var i = childObj.length - 1; i >= 0; i--) {
       elemen.removeChild(childObj[i]);
    };

    var frag       = document.createDocumentFragment();
    var tr         = document.createElement('tr');
    tr.id          = emptyRow;
    var td         = document.createElement('td');
    td.setAttribute('colspan', 4);
    td.style.textAlign   = 'center';
    td.innerHTML   = '';

    tr.appendChild(td);
    frag.appendChild(tr);
    elemen.insertBefore(frag, elemen.firstChild);

    return true;
}
//end

var deleteRecord     = function(elemenId, el){
   var tBody         = document.getElementById(elemenId);
   if(typeof(tBody) != 'undefined' && tBody != null){
      var emptyRow   = 'debet-empty-row';
      var totalRow   = 'row-debet-total';

      if(tBody.id.toUpperCase().indexOf('KREDIT') >= 0){
         emptyRow    = 'kredit-empty-row';
         totalRow    = 'row-debet-total';
      }
      var record        = el.parentNode.parentNode;
      var firstNode     = tBody.firstChild.nextSibling;
      var childObj      = tBody.getElementsByTagName('tr');

      if(firstNode.id != emptyRow || firstNode.id != totalRow){
         tBody.removeChild(record);
         if(childObj.length === 0){
            setEmptyRecord(tBody);
         }else{
            if(childObj[0].id == totalRow){
               setEmptyRecord(tBody);
            }else{
               setNominalJurnal(tBody.id);
            }
         }
      }else{
         setEmptyRecord(tBody);
      }
   }else{
      console.log('Cannot find HTML elemen');
   }
}

var setEmptyRecord      = function(elemen){
   var emptyRow   = 'debet-empty-row';

   if(elemen.id.toUpperCase().indexOf('KREDIT') >= 0){
      emptyRow    = 'kredit-empty-row';
   }

   var childObj   = elemen.getElementsByTagName('tr');
   for (var i = childObj.length - 1; i >= 0; i--) {
      elemen.removeChild(childObj[i]);
   };

   var frag       = document.createDocumentFragment();
   var tr         = document.createElement('tr');
   tr.id          = emptyRow;
   var td         = document.createElement('td');
   td.setAttribute('colspan', 6);
   td.style.textAlign   = 'center';
   td.innerHTML   = 'Pilih Data Akun';

   tr.appendChild(td);
   frag.appendChild(tr);
   elemen.insertBefore(frag, elemen.firstChild);

   return true;
}

var clearCurrency = function(str){
   num      = str.toString();
   num      = num.replace(/\$|\./g, '');
   num      = num.replace(/\$|\,/g,'.');
   num      = parseFloat(num);
   return num;
}

var formatNumber = function (num, mode){
   var num     = num.toString();
   num         = num.replace(/\$|\,/g,'');
   if(isNaN(num)){
      num      = "0";
   }
   sign        = (num == (num = Math.abs(num)));
   num         = Math.floor(num*100+0.50000000001);
   cents       = num%100;
   num         = Math.floor(num/100).toString();
   if(cents<10){
      cents    = "0" + cents;
   }
   for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++){
      num      = num.substring(0,num.length-(4*i+3))+'.'+num.substring(num.length-(4*i+3));
   }

   return ((sign)?'':'-') + num + ',' + cents;;
}

var setNominalJurnal    = function (elemenId){
   var elemen           = document.getElementById(elemenId)
   var childObj         = elemen.getElementsByTagName('input');
   var elemenId         = elemen.id.toUpperCase();

   var patern           = /debet\[(\d+)\]\[nominal\]/;
   var nominalHolder    = document.getElementById('debet-total');
   if(elemenId.indexOf('KREDIT') >= 0){
      patern            = /kredit\[(\d+)\]\[nominal\]/;
      nominalHolder     = document.getElementById('kredit-total');
   }
   var nominalTotal     = 0;

   if(childObj.length > 0){
      for (var i = childObj.length - 1; i >= 0; i--) {
         var str  = childObj[i].name;
         if(str.match(patern)){
            var nominal       = parseFloat(childObj[i].gvGetValue());
            nominalTotal+= nominal;
            console.log(childObj[i].gvGetValue());
         }
      };
   }

   if(nominalHolder != null || typeof(nominalHolder) != 'undefined'){
      nominalHolder.innerHTML       = formatNumber(nominalTotal);
   }
}

var dataAkunKredit      = {AKUN_KREDIT_DATA};
var dataAkunDebet       = {AKUN_DEBET_DATA};
var dataJB              = {DATA_JB};
var dataPembProdi       = {DATA_PEMB_PRODI};
 

if(dataAkunDebet.length > 0){
   for(var i in dataAkunDebet){
      document.getElementById('CoaPlaceHolder_debet').addItem(
         dataAkunDebet[i].id,
         dataAkunDebet[i].kode,
         dataAkunDebet[i].nama,
         dataAkunDebet[i].sub_akun,
         dataAkunDebet[i].referensi,
         dataAkunDebet[i].keterangan,
         dataAkunDebet[i].nominal
      );
   }
}

if(dataAkunKredit.length > 0){
   for(var i in dataAkunKredit){
      document.getElementById('CoaPlaceHolder_kredit').addItem(
         dataAkunKredit[i].id,
         dataAkunKredit[i].kode,
         dataAkunKredit[i].nama,
         dataAkunKredit[i].sub_akun,
         dataAkunKredit[i].referensi,
         dataAkunKredit[i].keterangan,
         dataAkunKredit[i].nominal
      );
   }
}


if(dataJB.length > 0){
   for(var i in dataJB){
      document.getElementById('CoaPlaceHolder_jb').addItem(
            dataJB[i].prodi_id,
            dataJB[i].prodi_nama,
            dataJB[i].jenis_biaya_id,
            dataJB[i].jenis_biaya_nama,
            dataJB[i].nominal,
            dataJB[i].potongan,
            dataJB[i].deposit,
            dataJB[i].keterangan,
            dataJB[i].id_detail,
            dataJB[i].tipe
      );
   }
}

if(dataPembProdi.length > 0){
    document.getElementById('CoaPlaceHolder_pemb').addItem(
        dataPembProdi.prodi_tipe_pembayaran, 
        dataPembProdi.prodi_id,            
        dataPembProdi.prodi_nama,
        dataPembProdi.prodi_nominal,
        dataPembProdi.prodi_potongan,
        dataPembProdi.prodi_deposit,
        dataPembProdi.prodi_deposit_masuk,
        dataPembProdi.prodi_keterangan,
        dataPembProdi.prodi_penanggung_jawab,
        dataPembProdi.prodi_id_detail
    );
}

function cekBpkb(v){
    if( v ==='Y') {
        document.getElementById('bpkb').readOnly   = true;
        document.getElementById('bpkb').value='';
        document.getElementById('bpkb_ro').value='readonly="readonly"';
    } else {
        document.getElementById('bpkb').readOnly   = false;
        document.getElementById('bpkb_ro').value='';
    }
}
function cekRef(v){
    if( v ==='Y') {
        document.getElementById('bpkb').readOnly   = true;
        document.getElementById('bpkb').value='';
        document.getElementById('bpkb_ro').value='readonly="readonly"';
    } else {
        document.getElementById('bpkb').readOnly   = false;
        document.getElementById('bpkb_ro').value='';
    }
}
// ]]>
</script>
<!-- /patTemplate:tmpl -->